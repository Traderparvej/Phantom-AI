<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Phantom AI ‚Äî Signal Generator</title>
<style>
:root{
  --bg:#080f24;
  --panel:#0f1530;
  --accent:#00bfff;
  --text:#fff;
  --muted:#9fb0d6;
  --green:#00ff99;
  --red:#ff4d4d;
}
body{
  background:var(--bg);
  color:var(--text);
  font-family:'Poppins',sans-serif;
  margin:0;padding:0;
  display:flex;flex-direction:column;align-items:center;
}
header{
  text-align:center;
  margin-top:25px;
}
h1{
  font-size:26px;
  color:var(--accent);
}
.slogan{
  font-size:13px;
  color:var(--muted);
  margin-top:-8px;
}
.device-id{
  margin-top:5px;
  font-size:14px;
  color:var(--muted);
}
.license-status{
  font-size:14px;
  color:var(--green);
}
.card{
  background:var(--panel);
  padding:20px;
  border-radius:12px;
  width:90%;
  max-width:450px;
  margin-top:20px;
  box-shadow:0 0 15px rgba(0,0,0,0.3);
}
.input-field,.btn{
  width:100%;
  padding:10px;
  border:none;
  border-radius:8px;
  margin-top:8px;
  font-size:15px;
}
.input-field{background:#121b3d;color:var(--text);}
.btn{background:var(--accent);color:#fff;cursor:pointer;transition:0.3s;}
.btn:hover{opacity:0.9;}
.footer{
  margin-top:20px;
  font-size:13px;
  color:var(--muted);
  cursor:pointer;
  text-decoration:underline;
}
.modal-backdrop{
  display:none;
  position:fixed;
  top:0;left:0;right:0;bottom:0;
  background:rgba(0,0,0,0.6);
  align-items:center;
  justify-content:center;
  z-index:999;
}
.modal{
  background:var(--panel);
  padding:25px;
  border-radius:12px;
  width:90%;
  max-width:400px;
  text-align:center;
  transform:scale(0.8);
  transition:0.3s;
}
.modal.show{transform:scale(1);}
.close-x{
  position:absolute;
  top:10px;right:15px;
  color:#fff;
  background:none;
  border:none;
  font-size:20px;
  cursor:pointer;
}
.trial-popup{
  position:fixed;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  background:var(--panel);
  padding:20px;
  border-radius:10px;
  text-align:center;
  color:var(--text);
  box-shadow:0 0 10px rgba(0,0,0,0.4);
  display:none;
  z-index:2000;
}
</style>
</head>
<body>
<header>
  <h1>üî• Phantom AI üî•</h1>
  <p class="slogan">AI Based Market Analysis System</p>
  <p class="device-id" id="deviceId"></p>
  <p class="license-status">License: <span id="licenseStatus">Inactive</span></p>
</header>

<div class="card">
  <input type="text" id="licenseKeyInput" class="input-field" placeholder="Enter License Key">
  <button id="verifyBtn" class="btn">Verify License</button>

  <hr style="margin:20px 0;border:0;border-top:1px solid #222;">
  
  <input type="text" id="marketName" class="input-field" placeholder="Enter Market Name (ex: EUR/USD)">
  <button id="generateBtn" class="btn">Generate Signal</button>

  <p id="signalText" style="margin-top:20px;">Press Generate to create a signal.</p>
</div>

<div class="trial-popup" id="trialPopup">
  You can generate only 2 signals per day in Free Trial.<br>
  <a href="https://t.me/TraderParvej" target="_blank" style="color:var(--accent)">Contact @TraderParvej for License Key</a>
</div>

<p class="footer" id="adminFooter">Admin Panel</p>

<!-- Password modal -->
<div class="modal-backdrop" id="passwordBackdrop">
  <div class="modal" id="passwordModal">
    <button class="close-x" id="closePassword">‚úï</button>
    <h2>Enter Admin Password</h2>
    <input type="password" id="adminPassword" placeholder="Enter Password" class="input-field">
    <button id="verifyPassword" class="btn">Verify</button>
  </div>
</div>

<!-- Admin panel -->
<div class="modal-backdrop" id="adminBackdrop">
  <div class="modal" id="adminModal">
    <button class="close-x" id="closeAdmin">‚úï</button>
    <h2>Admin Panel</h2>
    <input type="text" id="adminDevice" class="input-field" placeholder="Device ID">
    <input type="text" id="adminUser" class="input-field" placeholder="User Name">
    <input type="number" id="adminDays" class="input-field" placeholder="Validity (days)">
    <button id="generateLicense" class="btn">Generate License</button>
    <div id="licenseList" style="margin-top:15px;text-align:left;font-size:13px;"></div>
  </div>
</div>

<script>
const licenseStatus = document.getElementById('licenseStatus');
const licenseKeyInput = document.getElementById('licenseKeyInput');
const verifyBtn = document.getElementById('verifyBtn');
const generateBtn = document.getElementById('generateBtn');
const signalText = document.getElementById('signalText');
const trialPopup = document.getElementById('trialPopup');

// ===== Device ID =====
function getDeviceId(){
  if(!localStorage.getItem('phantom_device_id')){
    const random = Math.random().toString(16).substring(2,6);
    localStorage.setItem('phantom_device_id','Phantom-'+random);
  }
  return localStorage.getItem('phantom_device_id');
}
const deviceId = getDeviceId();
document.getElementById('deviceId').textContent = 'Device ID: '+deviceId;

// ===== License System =====
function loadLicenses(){return JSON.parse(localStorage.getItem('phantom_admin_licenses')||'{}');}
function saveLicenses(obj){localStorage.setItem('phantom_admin_licenses',JSON.stringify(obj));}

function checkStoredLicense(){
  const stored = JSON.parse(localStorage.getItem('phantom_user_license')||'{}');
  const today = new Date().toISOString().slice(0,10);
  if(stored.key && stored.device===deviceId && stored.expiry>=today){
    licenseStatus.textContent='Active ‚úÖ';
    return true;
  } else {
    localStorage.removeItem('phantom_user_license');
    return false;
  }
}
let licenseVerified = checkStoredLicense();

verifyBtn.addEventListener('click',()=>{
  const key = licenseKeyInput.value.trim();
  const allLicenses = loadLicenses();
  const today = new Date().toISOString().slice(0,10);
  if(key in allLicenses){
    const lic = allLicenses[key];
    if(lic.device===deviceId && lic.expiry>=today){
      licenseVerified = true;
      licenseStatus.textContent='Active ‚úÖ';
      localStorage.setItem('phantom_user_license',JSON.stringify({key,device:deviceId,expiry:lic.expiry}));
      alert('License Verified Successfully ‚úÖ');
    }else{
      alert('License expired or invalid device!');
    }
  }else{
    alert('Invalid License Key!');
  }
});

// ===== Signal Generator =====
let trialData = JSON.parse(localStorage.getItem('phantom_trial')||'{"date":"","count":0}');
const today = new Date().toISOString().slice(0,10);
if(trialData.date!==today){trialData={date:today,count:0};localStorage.setItem('phantom_trial',JSON.stringify(trialData));}

generateBtn.addEventListener('click',()=>{
  if(!licenseVerified && trialData.count>=2){
    trialPopup.style.display='block';
    return;
  }
  if(!licenseVerified){trialData.count++;localStorage.setItem('phantom_trial',JSON.stringify(trialData));}
  const market=document.getElementById('marketName').value.trim();
  if(!market){alert('Enter Market Name');return;}
  const gap=2+Math.floor(Math.random()*2);
  const time=new Date();time.setMinutes(time.getMinutes()+gap);
  const t=`${time.getHours().toString().padStart(2,'0')}:${time.getMinutes().toString().padStart(2,'0')}`;
  signalText.textContent=`${market} ‚Äî Next signal at ${t}`;
});

// ===== Admin Password Popup =====
document.getElementById('adminFooter').addEventListener('click',()=>{
  document.getElementById('passwordBackdrop').style.display='flex';
  setTimeout(()=>document.getElementById('passwordModal').classList.add('show'),10);
});
document.getElementById('closePassword').addEventListener('click',()=>{
  document.getElementById('passwordModal').classList.remove('show');
  setTimeout(()=>document.getElementById('passwordBackdrop').style.display='none',180);
});
document.getElementById('verifyPassword').addEventListener('click',()=>{
  const pwd=document.getElementById('adminPassword').value.trim();
  if(pwd==='@TraderParvej+'){
    document.getElementById('passwordBackdrop').style.display='none';
    openAdminPanel();
  }else alert('Wrong password!');
});

// ===== Admin Panel =====
function openAdminPanel(){
  document.getElementById('adminBackdrop').style.display='flex';
  setTimeout(()=>document.getElementById('adminModal').classList.add('show'),10);
  renderLicenses();
}
document.getElementById('closeAdmin').addEventListener('click',()=>{
  document.getElementById('adminModal').classList.remove('show');
  setTimeout(()=>document.getElementById('adminBackdrop').style.display='none',180);
});

document.getElementById('generateLicense').addEventListener('click',()=>{
  const d=document.getElementById('adminDevice').value.trim();
  const u=document.getElementById('adminUser').value.trim();
  const days=parseInt(document.getElementById('adminDays').value)||0;
  if(!d||!u||days<=0){alert('Fill all fields');return;}
  const key='PH-'+Math.random().toString(36).substring(2,10).toUpperCase();
  const exp=new Date();exp.setDate(exp.getDate()+days);
  const obj=loadLicenses();
  obj[key]={device:d,user:u,expiry:exp.toISOString().slice(0,10)};
  saveLicenses(obj);
  renderLicenses();
});

function renderLicenses(){
  const list=document.getElementById('licenseList');
  const obj=loadLicenses();
  list.innerHTML='';
  const today=new Date().toISOString().slice(0,10);
  for(const k in obj){
    const l=obj[k];
    const status=(l.expiry>=today)?'Active ‚úÖ':'Expired ‚ùå';
    list.innerHTML+=`<div><b>${l.user}</b> ‚Äî ${l.device} ‚Äî ${l.expiry} ‚Äî ${status}<br>Key: ${k}</div><hr>`;
  }
}
</script>
</body>
</html>
