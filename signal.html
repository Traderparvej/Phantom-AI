<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Phantom AI ‚Äî Signal Dashboard (Final)</title>
<style>
:root{
  --bg:#070b1a; --text:#e7f1ff; --accent:#00ffc6; --border:#1b2445; --muted:#9fb0d6;
  --success:#22c55e; --danger:#ff6b6b; --card:#0f1530;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;background:radial-gradient(circle at top,#020617 0%,#050a20 100%);color:var(--text)}
.container{min-height:100%;display:flex;align-items:flex-start;justify-content:center;padding:28px;}
.card{width:100%;max-width:920px;border-radius:14px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid var(--border);box-shadow:0 12px 40px rgba(2,6,23,0.7);padding:24px;backdrop-filter:blur(8px)}
.header{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px}
.brand{display:flex;align-items:center;gap:12px}
.logo-circle{width:18px;height:18px;border-radius:50%;background:linear-gradient(90deg,#00ffc6,#42a5ff);animation:pulse 1.6s infinite}
@keyframes pulse{0%{transform:scale(1);opacity:.75}50%{transform:scale(1.4);opacity:1}100%{transform:scale(1);opacity:.75}}
.brand h1{margin:0;font-size:20px;font-weight:800;background:linear-gradient(90deg,#00ffc6,#42a5ff);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.slogan{font-size:12px;color:var(--muted);margin-top:2px}
.device-info{text-align:right;font-size:13px;color:var(--muted);background:rgba(255,255,255,0.02);padding:6px 10px;border-radius:8px}

/* inputs & selects */
.input-field, .select-field{width:100%;padding:12px 14px;border-radius:10px;border:1px solid rgba(255,255,255,0.06);background:rgba(255,255,255,0.02);color:var(--text);outline:none;margin-bottom:12px;font-size:15px}
.select-field option{color:#000}

/* buttons */
.btn{padding:12px 14px;border-radius:10px;border:none;cursor:pointer;font-weight:800;background:linear-gradient(90deg,#00ffc6,#42a5ff);color:#00121a;transition:opacity .12s,transform .12s}
.btn:active{transform:translateY(1px)}
.btn-small{padding:8px 10px;font-weight:700;border-radius:8px}
.btn-danger{background:linear-gradient(90deg,#ff9b9b,#ff6b6b);color:#2b0707}
.row{display:flex;gap:10px;align-items:center}

/* output/result boxes */
.output-box{margin-top:16px;padding:16px;border-radius:12px;background:rgba(0,0,0,0.35);border:1px solid rgba(255,255,255,0.04);min-height:110px;position:relative}
.copy-btn{position:absolute;top:12px;right:12px;padding:6px 10px;border-radius:8px;border:none;background:linear-gradient(90deg,#00ffc6,#42a5ff);color:#00121a;font-weight:700;cursor:pointer}
.result-box{margin-top:16px;padding:16px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));border:1px solid rgba(255,255,255,0.03);min-height:160px}

/* small text */
.small-muted{font-size:13px;color:var(--muted);margin-top:8px}

/* toast */
.toast{position:fixed;right:20px;bottom:20px;background:linear-gradient(90deg,#00ffc6,#42a5ff);color:#00121a;padding:10px 14px;border-radius:10px;font-weight:800;transform:translateY(8px);opacity:0;transition:all .25s;z-index:2000}
.toast.show{opacity:1;transform:translateY(0)}

/* trial popup center */
.trial-popup{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:linear-gradient(90deg,#00ffc6,#42a5ff);color:#00121a;padding:18px 22px;border-radius:12px;font-weight:800;z-index:2000;display:none;box-shadow:0 10px 30px rgba(0,0,0,.45);cursor:pointer;text-align:center;max-width:320px}

/* admin footer */
.admin-footer{text-align:center;color:var(--muted);font-size:13px;margin-top:14px;cursor:pointer}

/* admin modal (professional) */
.modal-backdrop{position:fixed;inset:0;background:rgba(1,4,12,0.6);display:none;align-items:center;justify-content:center;z-index:3000}
.modal{width:720px;max-width:92%;background:linear-gradient(180deg, rgba(10,12,22,0.98), rgba(6,8,15,0.98));border-radius:12px;padding:18px;border:1px solid rgba(255,255,255,0.04);box-shadow:0 20px 60px rgba(1,4,12,0.7);transform:translateY(12px);opacity:0;transition:all .18s}
.modal.show{transform:translateY(0);opacity:1}
.modal h2{margin:0 0 10px 0;text-align:left}
.modal .grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:8px}
.modal .full{grid-column:1/-1}
.modal .actions{display:flex;gap:8px;align-items:center;justify-content:flex-end;margin-top:12px}
.licenses-table{width:100%;border-collapse:collapse;margin-top:12px;color:#cfefff}
.licenses-table th, .licenses-table td{padding:8px 10px;border-bottom:1px solid rgba(255,255,255,0.03);font-size:13px;text-align:left}
.badge{display:inline-block;padding:6px 8px;border-radius:8px;font-weight:700}
.badge.active{background:linear-gradient(90deg,#aef3d6,#22c55e);color:#07321a}
.badge.expired{background:linear-gradient(90deg,#ffd9d9,#ff6b6b);color:#2b0707}
.small-note{font-size:12px;color:var(--muted)}
.close-x{position:absolute;right:14px;top:12px;border:none;background:transparent;color:var(--muted);font-weight:700;cursor:pointer}
@media(max-width:720px){ .modal{padding:14px} .modal .grid{grid-template-columns:1fr} }
</style>
</head>
<body>
<div class="container">
  <div class="card" role="main">
    <div class="header">
      <div class="brand">
        <span class="logo-circle"></span>
        <div>
          <h1>Phantom AI</h1>
          <div class="slogan">AI Based Market Analysis System</div>
        </div>
      </div>
      <div class="device-info">
        Device ID: <strong id="deviceId">...</strong><br>
        License: <strong id="licenseStatus">Inactive</strong>
      </div>
    </div>

    <label class="small-muted">Select Market Type</label>
    <select id="marketType" class="select-field">
      <option value="">-- Choose Market --</option>
      <option value="Real Market">Real Market</option>
      <option value="OTC Market">OTC Market</option>
    </select>

    <label class="small-muted">Enter Pair Name</label>
    <input id="marketName" class="input-field" placeholder="e.g. EUR/JPY or USD/JPY">

    <div style="display:flex;gap:10px;align-items:center">
      <button id="generateBtn" class="btn">Generate</button>
      <div class="small-note" style="margin-left:8px">Free trial: 2 signals/day (without license)</div>
    </div>

    <div class="output-box" id="outputBox">
      <button class="copy-btn" id="copySignal">Copy</button>
      <div id="signalText" style="opacity:.7">Press Generate to create a signal.</div>
      <div class="signal-buttons" id="signalButtons" style="display:none;margin-top:10px;gap:6px">
        <button class="btn btn-small btn-success" id="btnProfit">‚úÖ Profit</button>
        <button class="btn btn-small btn-danger" id="btnLoss">‚ùå Loss</button>
        <button class="btn btn-small" id="btnAvoid">‚ö†Ô∏è Avoid</button>
      </div>
    </div>

    <div class="result-box" id="resultBox">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div>üèÅ Phantom AI Result üèÅ</div>
        <button class="copy-btn" id="copyResult" style="position:static">Copy</button>
      </div>
      <div id="resultList" style="white-space:pre-line;margin-top:8px;color:#cfefff;min-height:70px">No signals yet.</div>
      <div id="summary" class="small-muted"></div>
      <div style="display:flex;justify-content:flex-end">
        <button id="resetBtn" class="btn" style="margin-top:10px">Reset</button>
      </div>
    </div>

    <div class="admin-footer" id="adminFooter">Admin Panel</div>
  </div>
</div>

<!-- trial popup -->
<div class="trial-popup" id="trialPopup">
  You can generate only 2 signals per day in Free Trial.<br>
  Click here to get License Key (<a href="https://t.me/TraderParvej" style="color:#00121a;text-decoration:underline">Telegram</a>)
</div>

<!-- toast -->
<div class="toast" id="toast"></div>

<!-- admin modal -->
<div class="modal-backdrop" id="modalBackdrop">
  <div class="modal show">
    <button class="close-x" id="closeModal">√ó</button>
    <h2>Admin Panel</h2>
    <div class="grid">
      <input type="text" placeholder="Device ID" id="adminDeviceId" class="input-field">
      <input type="text" placeholder="User Name" id="adminUserName" class="input-field">
      <input type="number" placeholder="Validity Days" id="adminValidity" class="input-field" value="30">
      <input type="text" placeholder="Note" id="adminNote" class="input-field">
      <button id="generateLicenseBtn" class="btn full">Generate License</button>
    </div>
    <table class="licenses-table">
      <thead>
        <tr>
          <th>License Key</th>
          <th>Device</th>
          <th>User</th>
          <th>Expiry</th>
          <th>Status</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody id="licensesBody"></tbody>
    </table>
  </div>
</div>

<!-- password modal -->
<div class="modal-backdrop" id="passwordBackdrop" style="display:none;align-items:center;justify-content:center;">
  <div class="modal show" style="max-width:320px;text-align:center;">
    <button class="close-x" id="closePasswordModal">√ó</button>
    <h2>Enter Admin Password</h2>
    <input type="password" id="adminPasswordInput" class="input-field" placeholder="Password">
    <button class="btn full" id="verifyAdminPasswordBtn">Verify</button>
  </div>
</div>

<script>
// --- Utilities ---
function showToast(msg="Done"){ const t=document.getElementById('toast'); t.textContent=msg; t.classList.add('show'); setTimeout(()=>t.classList.remove('show'),1400);}
function copyText(txt){navigator.clipboard.writeText(txt); showToast('Copied!');}

// --- Device ID & License ---
let deviceId = localStorage.getItem('phantom_device_id');
if(!deviceId){ deviceId='DEV-'+Math.random().toString(36).substring(2,8).toUpperCase(); localStorage.setItem('phantom_device_id',deviceId);}
document.getElementById('deviceId').textContent=deviceId;

function loadLicenses(){return JSON.parse(localStorage.getItem('phantom_licenses_v1')||'{}');}
function saveLicenses(obj){localStorage.setItem('phantom_licenses_v1',JSON.stringify(obj));}
function checkLicense(){const licenses=loadLicenses(); for(const k in licenses){if(licenses[k].device===deviceId && new Date(licenses[k].expiry)>new Date()){document.getElementById('licenseStatus').textContent='Active'; return true;}}document.getElementById('licenseStatus').textContent='Inactive'; return false;}

// --- Signal Logic ---
let freeCount = parseInt(localStorage.getItem('phantom_free_count')||'0');
let today = new Date().toDateString();
let lastDay = localStorage.getItem('phantom_free_day');
if(lastDay!==today){freeCount=0; localStorage.setItem('phantom_free_day',today);}
const generateBtn=document.getElementById('generateBtn');
const outputBox=document.getElementById('outputBox');
const signalText=document.getElementById('signalText');
const signalButtons=document.getElementById('signalButtons');
const resultList=document.getElementById('resultList');
const summary=document.getElementById('summary');
const trialPopup=document.getElementById('trialPopup');
const copySignal=document.getElementById('copySignal');
const copyResult=document.getElementById('copyResult');
const resetBtn=document.getElementById('resetBtn');
const btnProfit=document.getElementById('btnProfit');
const btnLoss=document.getElementById('btnLoss');
const btnAvoid=document.getElementById('btnAvoid');

let results=[];

function updateSummary(){
  const total=results.length;
  const win=results.filter(r=>r.status==='Profit').length;
  const loss=results.filter(r=>r.status==='Loss').length;
  const avoid=results.filter(r=>r.status==='Avoid').length;
  summary.textContent=`üìä Total Signals: ${total} | ‚úÖ Win: ${win} | ‚ùå Loss: ${loss} | ‚ö†Ô∏è Avoid: ${avoid}`;
}

generateBtn.addEventListener('click',()=>{
  const market=document.getElementById('marketType').value;
  const pair=document.getElementById('marketName').value.trim();
  if(!market||!pair){showToast('Select Market & Enter Pair'); return;}
  if(!checkLicense() && freeCount>=2){ trialPopup.style.display='block'; return;}
  const now=new Date();
  now.setMinutes(now.getMinutes()+Math.floor(Math.random()*2+2)); // 2-3 min
  const hh=String(now.getHours()).padStart(2,'0'), mm=String(now.getMinutes()).padStart(2,'0');
  const signal=`üí± Pair: ${pair}\n‚è∞ Time: ${hh}:${mm}\n\nüìà Strategy: Opposite Trade\n\n‚ö°Ô∏è Note: Follow risk management & check previous candle.`;
  signalText.textContent=signal;
  signalButtons.style.display='flex';
  if(!checkLicense()){freeCount++; localStorage.setItem('phantom_free_count',freeCount);}
});

// Copy buttons
copySignal.addEventListener('click',()=>copyText(signalText.textContent));
copyResult.addEventListener('click',()=>copyText(resultList.textContent));

// Result buttons
function addResult(status){
  results.push({text:signalText.textContent,status});
  resultList.textContent=results.map(r=>`${r.text}\n\nResult: ${r.status}`).join('\n\n');
  updateSummary();
  signalButtons.style.display='none';
}
btnProfit.addEventListener('click',()=>addResult('Profit'));
btnLoss.addEventListener('click',()=>addResult('Loss'));
btnAvoid.addEventListener('click',()=>addResult('Avoid'));

// Reset
resetBtn.addEventListener('click',()=>{
  results=[]; resultList.textContent='No signals yet.'; summary.textContent=''; signalText.textContent='Press Generate to create a signal.'; signalButtons.style.display='none';
});

// Trial popup hide
trialPopup.addEventListener('click',()=>trialPopup.style.display='none');

// --- Admin Panel ---
const adminFooter=document.getElementById('adminFooter');
const passwordBackdrop=document.getElementById('passwordBackdrop');
const modalBackdrop=document.getElementById('modalBackdrop');
const closePasswordModal=document.getElementById('closePasswordModal');
const closeModalBtn=document.getElementById('closeModal');
const verifyAdminPasswordBtn=document.getElementById('verifyAdminPasswordBtn');
const adminPasswordInput=document.getElementById('adminPasswordInput');
const licensesBody=document.getElementById('licensesBody');
const generateLicenseBtn=document.getElementById('generateLicenseBtn');
const adminDeviceIdInput=document.getElementById('adminDeviceId');
const adminUserNameInput=document.getElementById('adminUserName');
const adminValidityInput=document.getElementById('adminValidity');
const adminNoteInput=document.getElementById('adminNote');

function renderLicenses(){
    const licenses=loadLicenses();
    licensesBody.innerHTML='';
    for(const key in licenses){
        const l=licenses[key];
        const isActive=new Date(l.expiry)>new Date();
        const tr=document.createElement('tr');
        tr.innerHTML=`<td>${key}</td><td>${l.device}</td><td>${l.user}</td><td>${new Date(l.expiry).toLocaleDateString()}</td><td><span class="badge ${isActive?'active':'expired'}">${isActive?'Active':'Expired'}</span></td><td><button class="btn btn-small btn-danger" onclick="deleteLicense('${key}')">Delete</button></td>`;
        licensesBody.appendChild(tr);
    }
}

function deleteLicense(key){
    const licenses=loadLicenses();
    delete licenses[key];
    saveLicenses(licenses);
    renderLicenses();
    showToast('Deleted');
}

function generateRandomKey(){return 'PH-'+Math.random().toString(36).substring(2,10).toUpperCase();}

// Admin events
adminFooter.addEventListener('click',()=>{passwordBackdrop.style.display='flex';});
closePasswordModal.addEventListener('click',()=>{passwordBackdrop.style.display='none';});
closeModalBtn.addEventListener('click',()=>{modalBackdrop.style.display='none';});
verifyAdminPasswordBtn.addEventListener('click',()=>{
  if(adminPasswordInput.value==='Admin@123'){passwordBackdrop.style.display='none'; modalBackdrop.style.display='flex'; renderLicenses(); adminPasswordInput.value=''; showToast('Admin access granted');}
  else showToast('Wrong password');
});
generateLicenseBtn.addEventListener('click',()=>{
  const device=adminDeviceIdInput.value.trim();
  const user=adminUserNameInput.value.trim();
  const days=parseInt(adminValidityInput.value);
  const note=adminNoteInput.value.trim();
  if(!device||!user||!days){showToast('Fill all fields');return;}
  const key=generateRandomKey();
  const expiry=new Date(); expiry.setDate(expiry.getDate()+days);
  const licenses=loadLicenses();
  licenses[key]={device,user,expiry:expiry.toISOString(),note};
  saveLicenses(licenses);
  renderLicenses();
  showToast('License generated');
  adminDeviceIdInput.value=''; adminUserNameInput.value=''; adminValidityInput.value='30'; adminNoteInput.value='';
});
</script>
</body>
</html>
